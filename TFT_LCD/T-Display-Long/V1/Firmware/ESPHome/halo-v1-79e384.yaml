substitutions:

  # Home Assistant connection for HTTP API calls
  # Create a long-lived access token in HA: Profile → Security → Long-Lived Access Tokens
  ha_url: !secret ha_url  # Example: "http://homeassistant.local:8123"
  ha_token: !secret ha_token  # Your long-lived access token

  # Weather configuration (if enabled below)
  weather_entity_id: "weather.hhut"
  weather_daily_refresh_interval: "3600"  # 60 minutes for daily forecast
  weather_hourly_refresh_interval: "900"  # 15 minutes for hourly forecast
  current_temp_sensor: "sensor.st_00143056_temperature"  # Your actual sensor
  apparent_temp_sensor: "sensor.st_00143056_feels_like"  # Your actual sensor
  wind_speed_sensor: "sensor.st_00143056_wind_speed"  # Your actual sensor
  wind_direction_sensor: "sensor.st_00143056_wind_direction"  # Your actual sensor

  # Network Configuration
  wifi_ssid: !secret wifihome_ssid
  wifi_password: !secret wifihome_password

  # Security
  ota_password: !secret ota_password
  
  # API Configuration
  api_reboot_timeout: "15min"

esphome:
  name: halo-v1-79e384
  friendly_name: Halo Air Quality Sensor Dev
  name_add_mac_suffix: false

  # # ⚠️ ONE-TIME: Clear Improv WiFi credentials on next boot
  package_import_url: github://truffshuff/halo/TFT_LCD/T-Display-Long/V1/Firmware/ESPHome/Halo-v1.yaml@test
  import_full_config: true

ota:
  - platform: esphome
    id: ota_default

wifi:
  on_connect:
    - delay: 5s # Gives time for improv results to be transmitted

  # Enable fallback hotspot (captive portal) in case wifi connection fails
  ap:
    ssid: "Halo Hotspot"

# logger:
#   level: DEBUG
#   logs:
#     component: INFO       # Suppress component setup messages
#     wifi: INFO            # Suppress WiFi debug messages
#     api: INFO             # Keep general API at INFO
#     api.connection: DEBUG # But enable API connection debug for BLE proxy
#     nimble_proxy: DEBUG 
#     nimble_improv: DEBUG

packages:
  remote_package:
    url: https://github.com/truffshuff/halo/
    ref: Test
    files:
      - TFT_LCD/T-Display-Long/V1/Firmware/ESPHome/Halo-v1-Core.yaml
    refresh: Always
    refresh: Always