esphome:
  name: halo-v1
  friendly_name: Halo Air Quality Sensor
  name_add_mac_suffix: true
  platformio_options:
    upload_speed: 921600
    board_build.flash_mode: qio
    board_build.psram_type: opi
    board_build.f_flash: 80000000L
    board_build.f_cpu: 240000000L

  min_version: 2025.6.2

  project:
    name: "yashmulgaonkar.Halo-v1"
    version: "${version}"

dashboard_import:
  package_import_url: github://truffshuff/halo/TFT_LCD/T-Display-Long/V1/Firmware/ESPHome/Halo-v1.yaml@WireGuard
  import_full_config: true

ota:
  - platform: esphome
    id: ota_default

wifi:
  on_connect:
    - delay: 5s # Gives time for improv results to be transmitted

  # Enable fallback hotspot (captive portal) in case wifi connection fails
  ap:
    ssid: "Halo Hotspot"

wireguard:
  address: 10.6.0.2
  private_key: gFrKaUf1j2DTDmO1gD32op15t3JNAz1W8MVw9GdtBm4=
  peer_endpoint: 73.86.51.45
  peer_public_key: OHSVnpenK/ZQauqbjF9sbaqq55yKI8oDGJRfIDZLBns=

  # Optional netmask (this is the default, no outgoing traffic
  # will pass through the tunnel if omitted)
  netmask: 0.0.0.0

  # Optional endpoint port (WireGuard default if omitted)
  peer_port: 51820

  # Optional pre-shared key (omit if not in use)
  peer_preshared_key: cP9tEJU+AjQcCj993ChLsoYxQd5e3PAIrlN3w1kpaQs=

  # Optional list of ip/mask (any host is allowed if omitted)
  peer_allowed_ips:
    - 192.168.1.0/24
    - 10.6.0.1/32 # the /32 can be omitted for single host
    - 10.6.0.2/32
  # Optional keepalive (disabled by default)
  peer_persistent_keepalive: 25s

packages:
  remote_package:
    url: https://github.com/truffshuff/halo/
    ref: WireGuard
    files:
      - TFT_LCD/T-Display-Long/V1/Firmware/ESPHome/Halo-v1-Core.yaml
    refresh: 0d
