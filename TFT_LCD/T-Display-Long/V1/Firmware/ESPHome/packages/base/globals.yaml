# ============================================================================
# Global Variables - Shared System State
# ============================================================================
# System-level global variables shared across multiple modules
# Dependencies: None (loaded first)
#
# This file contains ONLY globals that are truly shared across multiple modules
# or are fundamental to system operation. Feature-specific globals have been
# moved to their respective feature files.
#
# CONTENTS:
#   - Startup/boot state (cycleCounter for LED animation)
#   - OTA operation state (ota_in_progress)
#   - Display backlight state (display_backlight_is_on)
#   - Sensor UI batching (sensor_ui_dirty, last_sensor_ui_update)
#   - Default page configuration (default_page_index)
#
# MIGRATED GLOBALS (Phase 2 Complete):
#   - Clock → features/clock/clock_base.yaml
#   - Page Rotation → features/page_rotation/page_rotation.yaml
#   - Weather → features/weather/weather_base.yaml
#   - WireGuard → features/wireguard/wireguard.yaml
#   - AirQ → features/airq/airq_base.yaml
#   - WiFi Status → features/wifi_status/wifi_page_base.yaml
#   - Diagnostics → features/diagnostics/diagnostics.yaml
# ============================================================================

globals:

  # ============================================================================
  # Startup/Boot State
  # ============================================================================

  # Startup light blink cycle counter
  # Tracks how many 1-second intervals have passed during startup LED animation
  # Used to stop rainbow effect after 30 seconds and turn off light
  # NOTE: Shared between networking.yaml (WiFi events) and ble_improv.yaml (LED effects)
  # Cannot be moved to BLE module due to load order dependency with networking module
  - id: cycleCounter
    type: int
    restore_value: no
    initial_value: '0'

  # ============================================================================
  # Page Configuration
  # ============================================================================

  # Default page to show on startup
  - id: default_page_index
    type: int
    restore_value: yes
    initial_value: '0'

  # ============================================================================
  # OTA Operations
  # ============================================================================

  # Flag to indicate OTA firmware update in progress
  # Prevents page rotation and other operations during critical updates
  - id: ota_in_progress
    type: bool
    restore_value: no
    initial_value: 'false'

  # ============================================================================
  # Display State Management
  # ============================================================================

  # Display backlight state tracking
  # Used to prevent redundant backlight on/off commands
  - id: display_backlight_is_on
    type: bool
    restore_value: no
    initial_value: 'true'

  # ============================================================================
  # Sensor UI Update Batching
  # ============================================================================
  # To prevent excessive LVGL rendering and reduce SPI bus contention,
  # sensor value updates are batched and refreshed at 2-second intervals
  # instead of updating the display on every sensor change.
  #
  # These globals are shared across multiple sensor modules and Core
  # - sensor_ui_dirty: Set when any sensor value changes
  # - last_sensor_ui_update: Timestamp of last batch UI refresh (in milliseconds)
  # ============================================================================

  - id: sensor_ui_dirty
    type: bool
    restore_value: no
    initial_value: 'false'

  - id: last_sensor_ui_update
    type: uint32_t
    restore_value: no
    initial_value: '0'
